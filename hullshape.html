<html>
  <head>
    <title>calculate primary and secondary stability</title>
    <script lang="text/javascript">
      let area = 0
      let nodes = []

      const calculate = () => {
        nodes = [[0, 0]]
        for (const group of window.nodesContainer.children) {
          node = [...(group.querySelectorAll('input'))].map(el => +el.value)
          nodes.push(node, [-node[0], node[1]])
        }
        nodes = nodes.sort(([a], [b]) => a < b ? -1 : 1)
        console.log(nodes)

        let area = 0
        for (let i = 1; i < nodes.length; i++){
          area += (nodes[i][1] - nodes[i-1][1]) * (nodes[i][0] + nodes[i-1][0])  
        }
        console.log({ area })
        draw()
        return area
      }

      const draw = () => {
        let path = 'M 0,0'
        for (const node of nodes) path += ` L ${node[0]},${node[1]}`
        window.path.setAttribute('d', path)
      }

      const addNode = () =>
        window.nodesContainer.appendChild(window.nodeTemplate.content.cloneNode(true))
      setTimeout(() => addNode(), 0)
    </script>
  </head>
  <body>
    This calculates righting/capsizing forces for different hull shapes with similar submerged volumes.
    Submerged section area is considered to be one. 
    <div role="none" id="nodesContainer">
    </div>
    <svg viewBox="-1 -1 2 1" width="200" height="100">
      <g transform="scale(1 -1)">
        <path id="path" stroke="red" fill="none" stroke-width="1" vector-effect="non-scaling-stroke"></path>
      </g>
    </svg>
    <template id="nodeTemplate">
      <div role="group">
        <label>x<input type="number" value="1"></label>
        <label>y<input type="number" value="1"></label>
      </div>
    </template>
    <button onClick="addNode()">add node</button>
    <button onclick="calculate()">calculate</button>
  </body>
</html>
